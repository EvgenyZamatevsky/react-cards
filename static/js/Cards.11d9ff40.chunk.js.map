{"version":3,"file":"static/js/Cards.11d9ff40.chunk.js","mappings":"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","sources":["webpack://react-cards/./src/pages/cards/Cards.module.scss?249a","pages/cards/Cards.tsx","store/selectors/cards.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Cards_container__uItu4\",\"content\":\"Cards_content__kRfAz\",\"addNewCardBtn\":\"Cards_addNewCardBtn__dxxlS\",\"title\":\"Cards_title__A-NdW\",\"sort\":\"Cards_sort__BX8eB\",\"emptyItems\":\"Cards_emptyItems__mpOwK\"};","import React, { FC, useEffect, useRef, useState } from 'react'\r\nimport { BackToPage, Card, Pagination, Search, Sort, UniversalButton } from 'components'\r\nimport { Path } from 'enums'\r\nimport { useSelector } from 'react-redux'\r\nimport { Navigate, useNavigate, useParams } from 'react-router-dom'\r\nimport { addCard, getCards } from 'store/asyncActions/cards'\r\nimport { ReturnComponentType } from 'types'\r\nimport { resetMinValueAndMaxValue, setCardPage, setCardPageCount, setSearchCardValue, setSortCards } from 'store/slices'\r\nimport { Modal, ModalCard } from 'components/common'\r\nimport { EMPTY_STRING, ERROR_MESSAGE } from 'constants/base'\r\nimport { useAppDispatch } from 'hooks'\r\nimport style from './Cards.module.scss'\r\nimport {\r\n\tselectAuthorizedUserId,\r\n\tselectCardPage,\r\n\tselectCardPageCount,\r\n\tselectCards,\r\n\tselectCardsTotalCount,\r\n\tselectIsAuth,\r\n\tselectIsDisabled,\r\n\tselectPackUserId,\r\n\tselectSearchCardValue,\r\n\tselectSortCards\r\n} from 'store/selectors'\r\n\r\nexport const Cards: FC = (): ReturnComponentType => {\r\n\r\n\tconst dispatch = useAppDispatch()\r\n\r\n\tconst { packId } = useParams()\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst isAuth = useSelector(selectIsAuth)\r\n\tconst cards = useSelector(selectCards)\r\n\tconst searchCardValue = useSelector(selectSearchCardValue)\r\n\tconst sortCards = useSelector(selectSortCards)\r\n\tconst cardPage = useSelector(selectCardPage)\r\n\tconst cardPageCount = useSelector(selectCardPageCount)\r\n\tconst isDisabled = useSelector(selectIsDisabled)\r\n\tconst cardsTotalCount = useSelector(selectCardsTotalCount)\r\n\tconst authorizedUserId = useSelector(selectAuthorizedUserId)\r\n\tconst packUserId = useSelector(selectPackUserId)\r\n\r\n\tconst [isActiveModal, setIsActiveModal] = useState(false)\r\n\tconst [questionValue, setQuestionValue] = useState(EMPTY_STRING)\r\n\tconst [answerValue, setAnswerValue] = useState(EMPTY_STRING)\r\n\tconst [questionErrorMessage, setQuestionErrorMessage] = useState(EMPTY_STRING)\r\n\tconst [answerErrorMessage, setAnswerErrorMessage] = useState(EMPTY_STRING)\r\n\r\n\tconst questionInputRef = useRef<HTMLInputElement>(null)\r\n\r\n\tconst sortCardsValues: string[] = ['Question', 'Answer', 'Last Updated', 'Grade']\r\n\tconst sortCardsByDescending: string[] = ['0question', '0answer', '0updated', '0grade ']\r\n\tconst sortCardsByAscending: string[] = ['1question', '1answer', '1updated', '1grade ']\r\n\tconst isOwner = authorizedUserId === packUserId\r\n\r\n\tconst cardsRender = cards.map(({ _id, question, answer, updated, grade }) => {\r\n\t\treturn (\r\n\t\t\t<Card\r\n\t\t\t\tkey={_id}\r\n\t\t\t\tcardId={_id}\r\n\t\t\t\tquestion={question}\r\n\t\t\t\tanswer={answer}\r\n\t\t\t\tupdated={updated}\r\n\t\t\t\tgrade={grade}\r\n\t\t\t\tpackId={packId!}\r\n\t\t\t\tisOwner={isOwner}\r\n\t\t\t/>\r\n\t\t)\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isAuth) {\r\n\t\t\tdispatch(getCards(\r\n\t\t\t\t{\r\n\t\t\t\t\tpackId: packId as string,\r\n\t\t\t\t\tcardQuestion: searchCardValue,\r\n\t\t\t\t\tsortCards,\r\n\t\t\t\t\tpage: cardPage,\r\n\t\t\t\t\tpageCount: cardPageCount\r\n\t\t\t\t}))\r\n\t\t}\r\n\t}, [searchCardValue, sortCards, cardPage, cardPageCount])\r\n\r\n\tconst handleSetSearchCardValueChange = (value: string): void => {\r\n\t\tdispatch(setSearchCardValue(value))\r\n\t}\r\n\r\n\tconst handleResetSearchCardValueClick = (resetValue: string): void => {\r\n\t\tdispatch(setSearchCardValue(resetValue))\r\n\t}\r\n\r\n\tconst handleSortCardsByDescendingClick = (value: string): void => {\r\n\t\tdispatch(setSortCards(value))\r\n\t}\r\n\r\n\tconst handleSortCardsByAscendingClick = (value: string): void => {\r\n\t\tdispatch(setSortCards(value))\r\n\t}\r\n\r\n\tconst resetModalValues = (): void => {\r\n\t\tsetIsActiveModal(false)\r\n\t\tsetQuestionValue(EMPTY_STRING)\r\n\t\tsetAnswerValue(EMPTY_STRING)\r\n\t\tsetQuestionErrorMessage(EMPTY_STRING)\r\n\t\tsetAnswerErrorMessage(EMPTY_STRING)\r\n\t}\r\n\r\n\tconst onAddPackClick = (): void => {\r\n\t\tconst answerValueTrimmed = answerValue.trim()\r\n\t\tconst questionValueTrimmed = questionValue.trim()\r\n\r\n\t\tif (answerValueTrimmed !== EMPTY_STRING && questionValueTrimmed !== EMPTY_STRING) {\r\n\t\t\tdispatch(addCard({ packId: packId as string, answer: answerValue, question: questionValue }))\r\n\t\t\tresetModalValues()\r\n\t\t} else {\r\n\t\t\tif (answerValueTrimmed === EMPTY_STRING) {\r\n\t\t\t\tsetAnswerErrorMessage(ERROR_MESSAGE)\r\n\t\t\t}\r\n\t\t\tif (questionValueTrimmed === EMPTY_STRING) {\r\n\t\t\t\tsetQuestionErrorMessage(ERROR_MESSAGE)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleBackPacksListClick = (): void => {\r\n\t\tnavigate(Path.PACKS)\r\n\t\tdispatch(resetMinValueAndMaxValue())\r\n\t}\r\n\r\n\tconst handleSetPageClick = (page: number): void => {\r\n\t\tdispatch(setCardPage(page))\r\n\t}\r\n\r\n\tconst handleSetPageCountChange = (pageCount: number): void => {\r\n\t\tdispatch(setCardPageCount(pageCount))\r\n\t}\r\n\r\n\tconst handleDeactivateModalClick = (): void => resetModalValues()\r\n\r\n\tconst handleActivateModalClick = (): void => {\r\n\t\tsetIsActiveModal(true)\r\n\t\tquestionInputRef.current?.focus()\r\n\t}\r\n\r\n\tif (!isAuth) {\r\n\t\treturn <Navigate to={Path.LOGIN} />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal\r\n\t\t\t\tisModalActive={isActiveModal}\r\n\t\t\t\tonDeactivateModalClick={handleDeactivateModalClick}\r\n\t\t\t>\r\n\t\t\t\t<ModalCard\r\n\t\t\t\t\tonDeactivateModalClick={handleDeactivateModalClick}\r\n\t\t\t\t\tonSaveClick={onAddPackClick}\r\n\t\t\t\t\ttitle={'Add new card'}\r\n\t\t\t\t\tsetAnswerValue={setAnswerValue}\r\n\t\t\t\t\tsetQuestionValue={setQuestionValue}\r\n\t\t\t\t\tanswer={answerValue}\r\n\t\t\t\t\tquestion={questionValue}\r\n\t\t\t\t\tref={questionInputRef}\r\n\t\t\t\t\tquestionErrorMessage={questionErrorMessage}\r\n\t\t\t\t\tanswerErrorMessage={answerErrorMessage}\r\n\t\t\t\t\tsetQuestionErrorMessage={setQuestionErrorMessage}\r\n\t\t\t\t\tsetAnswerErrorMessage={setAnswerErrorMessage}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t\t<div className={style.container}>\r\n\t\t\t\t<BackToPage\r\n\t\t\t\t\ttitle={'Back to Packs List'}\r\n\t\t\t\t\tonBackToPageClick={handleBackPacksListClick}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<h2 className={style.title}>Cards</h2>\r\n\t\t\t\t<div className={style.content}>\r\n\t\t\t\t\t<Search\r\n\t\t\t\t\t\tsearchValue={searchCardValue}\r\n\t\t\t\t\t\thandleSetSearchValueChange={handleSetSearchCardValueChange}\r\n\t\t\t\t\t\thandleResetSearchValueClick={handleResetSearchCardValueClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{isOwner &&\r\n\t\t\t\t\t\t<UniversalButton\r\n\t\t\t\t\t\t\tclassName={style.addNewCardBtn}\r\n\t\t\t\t\t\t\tonClick={handleActivateModalClick}\r\n\t\t\t\t\t\t\tdisabled={isDisabled}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tAdd new card\r\n\t\t\t\t\t\t</UniversalButton>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={style.sort}>\r\n\t\t\t\t\t<Sort\r\n\t\t\t\t\t\tsortValues={sortCardsValues}\r\n\t\t\t\t\t\tsortByDescending={sortCardsByDescending}\r\n\t\t\t\t\t\tsortByAscending={sortCardsByAscending}\r\n\t\t\t\t\t\tsortValue={sortCards}\r\n\t\t\t\t\t\tisDisabled={isDisabled}\r\n\t\t\t\t\t\thandleSortByDescendingClick={handleSortCardsByDescendingClick}\r\n\t\t\t\t\t\thandleSortByAscendingClick={handleSortCardsByAscendingClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{cards.length\r\n\t\t\t\t\t? cardsRender\r\n\t\t\t\t\t: <h2 className={style.emptyItems}>There are no cards in this pack</h2>}\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpageCount={cardPageCount}\r\n\t\t\t\t\tpage={cardPage}\r\n\t\t\t\t\ttotalItemsCount={cardsTotalCount}\r\n\t\t\t\t\thandleSetPageClick={handleSetPageClick}\r\n\t\t\t\t\thandleSetPageCountChange={handleSetPageCountChange}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","import { CardType } from 'api/cards/types'\r\nimport { RootStateType } from 'store'\r\n\r\nexport const selectCards = (state: RootStateType): CardType[] => state.cards.cards\r\n\r\nexport const selectSearchCardValue = (state: RootStateType): string => state.cards.searchCardValue\r\n\r\nexport const selectSortCards = (state: RootStateType): string => state.cards.sortCards\r\n\r\nexport const selectCardPage = (state: RootStateType): number => state.cards.page\r\n\r\nexport const selectCardPageCount = (state: RootStateType): number => state.cards.pageCount\r\n\r\nexport const selectCardsTotalCount = (state: RootStateType): number => state.cards.cardsTotalCount\r\n\r\nexport const selectPackUserId = (state: RootStateType): string => state.cards.packUserId\r\n"],"names":["Cards","dispatch","useAppDispatch","packId","useParams","navigate","useNavigate","isAuth","useSelector","selectIsAuth","cards","selectCards","searchCardValue","selectSearchCardValue","sortCards","selectSortCards","cardPage","selectCardPage","cardPageCount","selectCardPageCount","isDisabled","selectIsDisabled","cardsTotalCount","selectCardsTotalCount","authorizedUserId","selectAuthorizedUserId","packUserId","selectPackUserId","useState","isActiveModal","setIsActiveModal","EMPTY_STRING","questionValue","setQuestionValue","answerValue","setAnswerValue","questionErrorMessage","setQuestionErrorMessage","answerErrorMessage","setAnswerErrorMessage","questionInputRef","useRef","isOwner","cardsRender","map","_id","question","answer","updated","grade","cardId","useEffect","getCards","cardQuestion","page","pageCount","resetModalValues","handleDeactivateModalClick","isModalActive","onDeactivateModalClick","onSaveClick","answerValueTrimmed","trim","questionValueTrimmed","addCard","ERROR_MESSAGE","title","ref","className","style","onBackToPageClick","Path","resetMinValueAndMaxValue","searchValue","handleSetSearchValueChange","value","setSearchCardValue","handleResetSearchValueClick","resetValue","onClick","current","focus","disabled","sortValues","sortByDescending","sortByAscending","sortValue","handleSortByDescendingClick","setSortCards","handleSortByAscendingClick","length","totalItemsCount","handleSetPageClick","setCardPage","handleSetPageCountChange","setCardPageCount","to","state"],"sourceRoot":""}